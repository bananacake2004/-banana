<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fixed ver25.0 Thread View</title>
<style>
    /* --------------------------------------------------
       基本設定
       -------------------------------------------------- */
    body, html {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        color: #0f1419;
        line-height: 1.6;
        overflow-x: hidden; 
        background-color: #f9f9f9;
        scroll-behavior: smooth; /* スムーズスクロール */
    }

    /* レイアウトコンテナ */
    .container {
        display: flex;
        flex-wrap: wrap;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        gap: 20px;
        position: relative;
    }

    /* メインコンテンツエリア */
    .main-content {
        flex: 1;
        min-width: 0;
        max-width: 600px; /* タイムラインっぽく幅制限 */
        margin: 0 auto;   /* 中央寄せ */
    }

    /* --------------------------------------------------
       投稿カードのデザイン
       -------------------------------------------------- */
    .card {
        background: #fff;
        border: 1px solid #cfd9de; /* Twitterっぽい薄い枠線 */
        border-radius: 16px;
        padding: 16px;
        margin-bottom: 24px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        transition: background-color 1s ease; /* ハイライト用 */
    }

    /* スクロール移動先としてハイライトするためのクラス */
    .card.highlight {
        background-color: #fff8c5; /* 一瞬黄色くなる */
        transition: none;
    }

    /* --- 親投稿（グレー枠） --- */
    .parent-post-preview {
        display: block; /* リンクとして機能させる */
        text-decoration: none;
        background-color: #f7f9f9;
        border: 1px solid #eff3f4;
        border-radius: 12px;
        padding: 12px;
        margin-bottom: 12px;
        font-size: 0.9rem;
        color: #536471;
        position: relative;
        transition: background-color 0.2s;
    }
    
    .parent-post-preview:hover {
        background-color: #eff1f1;
    }

    .parent-post-preview::before {
        content: "返信先: 自分";
        display: block;
        font-size: 0.75rem;
        color: #536471;
        margin-bottom: 4px;
        font-weight: bold;
    }

    /* --- 投稿ヘッダー（アイコン・名前・フォローボタン） --- */
    .post-header {
        display: flex;
        align-items: center; /* 垂直中央揃え */
        margin-bottom: 12px;
    }

    .user-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 12px;
        background-color: #ccc; /* 画像がない場合のダミー色 */
    }

    .user-info {
        flex: 1; /* 余ったスペースを埋める */
        line-height: 1.2;
    }

    .user-name {
        font-weight: bold;
        font-size: 1rem;
        display: block;
    }

    .user-id {
        color: #536471;
        font-size: 0.9rem;
    }

    .follow-btn {
        background-color: #0f1419;
        color: #fff;
        border: none;
        border-radius: 9999px; /* 完全な丸み */
        padding: 6px 16px;
        font-weight: bold;
        font-size: 0.9rem;
        cursor: pointer;
        transition: opacity 0.2s;
    }

    .follow-btn:hover {
        opacity: 0.8;
    }
    
    .follow-btn.following {
        background-color: #fff;
        color: #0f1419;
        border: 1px solid #cfd9de;
    }

    /* --- 本文とMoreボタン --- */
    .post-body {
        font-size: 1rem;
        margin-bottom: 12px;
        white-space: pre-wrap; /* 改行を反映 */
    }

    .more-content {
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease;
    }

    .more-content.is-open {
        display: block;
        animation: fadeIn 0.5s forwards;
    }

    @keyframes fadeIn {
        to { opacity: 1; }
    }

    .more-btn {
        color: #1d9bf0;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        font-size: 0.95rem;
    }
    .more-btn:hover { text-decoration: underline; }


    /* --------------------------------------------------
       サイドバー (Sticky)
       -------------------------------------------------- */
    .sticky-sidebar {
        width: 300px;
        position: -webkit-sticky;
        position: sticky;
        top: 20px;
        height: fit-content;
        background: #fff;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    @media (max-width: 768px) {
        .container { flex-direction: column; }
        .sticky-sidebar { width: 100%; position: static; }
        .main-content { max-width: 100%; }
    }

</style>
</head>
<body>

<div class="container">
    
    <main class="main-content">

        <article class="card" id="post-001">
            <div class="post-header">
                <img src="https://placehold.co/100" alt="Icon" class="user-avatar">
                <div class="user-info">
                    <span class="user-name">Gemini User</span>
                    <span class="user-id">@gemini_fan</span>
                </div>
                <button class="follow-btn">フォロー</button>
            </div>
            <div class="post-body">
                <p>これが最初の投稿です。ここからスレッドが始まります。<br>
                この投稿には ID="post-001" が振られています。</p>
            </div>
        </article>

        <article class="card" id="post-002">
            <div class="post-header">
                <img src="https://placehold.co/100/orange/white" alt="Icon" class="user-avatar">
                <div class="user-info">
                    <span class="user-name">Tanaka</span>
                    <span class="user-id">@tnk_daily</span>
                </div>
                <button class="follow-btn">フォロー</button>
            </div>
            <div class="post-body">
                <p>これは関係ない別の人の投稿です。スクロールの距離を稼ぐために置いてあります。</p>
                <div style="height: 100px; background:#eee;">画像エリア想定</div>
            </div>
        </article>

        <article class="card" id="post-003">
            
            <a href="#post-001" class="parent-post-preview">
                これは親の投稿の抜粋テキストです... クリックすると親（post-001）へ移動します。
            </a>

            <div class="post-header">
                <img src="https://placehold.co/100" alt="Icon" class="user-avatar">
                <div class="user-info">
                    <span class="user-name">Gemini User</span>
                    <span class="user-id">@gemini_fan</span>
                </div>
                <button class="follow-btn following">フォロー中</button>
            </div>

            <div class="post-body">
                <p>ここが「自分への返信」の本文です。</p>
                <p>上のグレーの枠をクリックしてみてください。スルスルっと上にスクロールして戻るはずです。</p>
                
                <div class="more-content" id="more-content-1">
                    <p>隠されていた長文の続きです。デザインの一貫性を保ちつつ、新しい機能を追加しました。</p>
                </div>
                <button class="more-btn" onclick="toggleMore('more-content-1', this)">...もっと見る</button>
            </div>
        </article>

        <div style="height: 500px;"></div>

    </main>

    <aside class="sticky-sidebar">
        <h3>トレンド</h3>
        <ul>
            <li>#GitHubPages</li>
            <li>#WebDesign</li>
            <li>#GeminiHelp</li>
        </ul>
        <div style="margin-top: 20px; font-size: 0.85rem; color: #888;">
            © 2025 My App
        </div>
    </aside>

</div>

<script>
    // Moreボタンの開閉ロジック
    function toggleMore(contentId, btn) {
        const content = document.getElementById(contentId);
        content.classList.add('is-open');
        btn.style.display = 'none'; // ボタンを消す
    }

    // アンカーリンククリック時のハイライト演出
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                // スクロール実行
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // 一瞬光らせる演出
                targetElement.classList.add('highlight');
                setTimeout(() => {
                    targetElement.classList.remove('highlight');
                }, 1000); // 1秒後に元の色に戻す
            }
        });
    });
</script>

</body>
</html>
